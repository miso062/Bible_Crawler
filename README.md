# 성경 크롤링 프로젝트

# 소개

[ nocr.net/korsms ](https://nocr.net/korsms) 사이트의 **쉬운말 성경**을 크롤링하여 구조화된 JSON 형식으로 저장하는 Node.js 프로젝트입니다.<br/>
구약 39권과 신약 27권, 총 66권의 성경 전체를 자동으로 수집하며, 각 책의 장(Chapter)과 절(Verse) 단위로 데이터를 파싱합니다.

<br/>

크롤링된 데이터는 다음과 같은 구조로 저장됩니다:
- 각 책의 한글명, 영문명, 구약/신약 구분, 카테고리 번호
- 각 장의 번호와 절 배열
- 각 절의 장 번호, 절 번호, 본문 텍스트

<br/>
<br/>
<br/>

# 설치하기

프로젝트를 클론한 후 의존성을 설치합니다.

```bash
npm install
```

<br/>
<br/>
<br/>

# 시작하기

크롤링을 시작하려면 다음 명령어를 실행하세요.

```bash
npm start
```

크롤링이 완료되면 `bible.json` 파일이 생성됩니다.

**주의사항:**
- 전체 성경 크롤링은 상당한 시간이 소요됩니다 (66권 × 평균 30장 × 1초 딜레이)
- 서버 부하를 방지하기 위해 각 요청 사이에 1초의 딜레이가 있습니다
- 네트워크 연결이 안정적인 환경에서 실행하는 것을 권장합니다

<br/>
<br/>
<br/>

# 주요 기능

- **전체 성경 크롤링**: 구약 39권, 신약 27권 자동 수집
- **구조화된 데이터 파싱**: 장(Chapter)과 절(Verse) 단위로 데이터 분리
- **순차 처리**: 서버 부하 방지를 위한 순차 크롤링 및 딜레이 처리
- **에러 처리**: 개별 장 크롤링 실패 시에도 다음 장으로 계속 진행
- **JSON 저장**: 크롤링된 데이터를 구조화된 JSON 형식으로 저장

<br/>
<br/>
<br/>

# 기술스택

- **Node.js**: JavaScript 런타임 환경
- **axios**: HTTP 클라이언트 라이브러리 (웹페이지 요청)
- **cheerio**: 서버 사이드 HTML 파싱 및 DOM 조작 라이브러리
- **fs**: Node.js 내장 파일 시스템 모듈 (파일 저장)

<br/>
<br/>
<br/>

# 프로젝트 구조

```
.
├── index.js              # 메인 크롤링 스크립트
├── bible-books.js        # 성경 책 정보 (66권) 데이터
├── bible.json            # 크롤링 결과 저장 파일 (자동 생성)
├── package.json          # 프로젝트 설정 및 의존성
├── .gitignore           # Git 제외 파일 목록
└── README.md            # 프로젝트 문서
```

<br/>
<br/>
<br/>

## 주요 파일 설명

- **index.js**: 크롤링 로직이 구현된 메인 파일
  - `fetchPage()`: 웹페이지 HTML 가져오기
  - `getChapterLinks()`: 장 링크 추출
  - `parseVerses()`: 텍스트를 절 단위로 파싱
  - `getBookDatas()`: 특정 책의 모든 장 데이터 수집
  - `getBibleDatas()`: 전체 성경 데이터 수집

- **bible-books.js**: 성경 66권의 메타 정보
  - 한글명, 영문명, 구약/신약 구분, 카테고리 번호

- **bible.json**: 크롤링 결과 파일
  - 각 책의 정보와 모든 장, 절 데이터가 포함된 JSON 파일

<br/>
<br/>
<br/>

## 데이터 구조 예시

```json
[
  {
    "korean": "창세기",
    "english": "Genesis",
    "testament": "OT",
    "categoryNumber": 136929,
    "chapters": [
      {
        "chapterNum": "1",
        "verses": [
          {
            "chapterNum": "1",
            "verseNum": "1",
            "verse": "태초에 하나님께서 하늘과 땅을 창조하셨다."
          }
        ]
      }
    ]
  }
]
```